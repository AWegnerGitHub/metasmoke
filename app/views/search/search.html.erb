<%= form_tag search_path, method: "get" do |f| %>
  <div class="form-group">
    <%= label_tag :title %>
    <%= text_field_tag :title, params[:title], placeholder: "*", class: "form-control" %>
  </div>
  <div class="form-group">
    <%= label_tag :body %>
    <%= text_field_tag :body, params[:body], placeholder: "*", class: "form-control" %>
  </div>
  <div class="form-group">
    <%= label_tag :username %>
    <%= text_field_tag :username, params[:username], placeholder: "*", class: "form-control" %>
  </div>
  <div class="form-group">
    <%= label_tag :why %>
    <%= text_field_tag :why, params[:why], placeholder: "*", class: "form-control" %>
  </div>
  <div class="form-group">
    <%= label_tag :site %>
    <%= select_tag :site, options_for_select(Site.all.map(&:site_name), params[:site]), class: "form-control", include_blank: "All" %>
  </div>

  <div class="form-group">
    <%= label_tag :feedback %>
    <%= select_tag :feedback, options_for_select(["true positive", "false positive", "NAA", "conflicted"], params[:feedback]), class: "form-control", include_blank: "All" %>
  </div>

  <div class="form-group">
    <%= label_tag :reason %>
    <%= select_tag :reason, options_from_collection_for_select(Reason.all.order(:reason_name), "id", "reason_name", params[:reason]), class: "form-control", include_blank: "All" %>
  </div>

  <div class="form-group">
    <%= label_tag :user_reputation %>
    <div class="form-group row">
      <div class="col-md-1">
        <%= select_tag :user_rep_direction, options_for_select(["==", "<=", ">="], params[:user_rep_direction] || ">="), class: "form-control" %>
      </div>

      <div class="col-md-1">
        <%= text_field_tag :user_reputation, params[:user_reputation] || "0", class: "form-control" %>
      </div>
    </div>
  </div>

  <%= submit_tag "Search", class: "btn btn-primary" %>
<% end %>

<% if @results.present? %>
  <table class="table"> 
    <thead>
      <tr>
        <th>Results</th>
      </tr>
    </thead>

    <tbody>
      <% @results.each do |post| %>
        <%= render "posts/post", :post => post %>
      <% end %>
    </tbody>
  </table>
  <div class="text-center">
    <%= will_paginate @results, renderer: BootstrapPagination::Rails %>
    <p class="text-muted">
      <%= link_to "test", search_path(params: request.query_parameters, :format => :json) %>
    </p>
  </div>
<% end %>
